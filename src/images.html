<!DOCTYPE html>
<html>
<head>
  <!-- Compiled and minified CSS -->
  <!--Import Google Icon Font-->
  <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Compiled and minified JavaScript -->

</head>
<body>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>

<script src="/assets/camera51.js"></script>


<script src="/assets/dragdropfile/filereader.js"></script>
<script src="/assets/dragdropfile/script.js"></script>
<link href="/assets/dragdropfile/style.css" rel="stylesheet">

<style type="text/css">
  body {
    background-color: whitesmoke;

  }

  .resultImg {
    background-color: white;
    max-height: 200px;
    max-width: 200px;
  }

  .modal {
    max-height: 100%;
    width: 80%;

  }

  .roboto {
    font-family: Roboto, sans-serif;
    font-size: initial
  }

  a {
    cursor: pointer !important;
  }
</style>

<div id="dropbox">
  <div class="text">
    Drop Images Here
  </div>
</div>
<div id="imageList">
</div>

<!-- Modal Structure -->
<div id="modal1" class="modal" style="margin-bottom: -8px; ">
  <div class="modal-content" style="padding-top: 20px;padding-bottom: 5px;background-color: #393b4b;">
    <a style="position: absolute; right: 0px; top: 16px;"
       class=" modal-action modal-close waves-effect waves-light btn-flat">
      <i style="font-size: 31px;color: white" class="material-icons right">close</i>
    </a>
    <div style="font-family: Roboto, sans-serif; font-size: 24px; color: white;margin-bottom: 6px;">Background Remover
      Edit
    </div>
    <a id="camera51-btn-mark-object" class="waves-effect waves-light btn-flat roboto"
       style="color:#7cb342;font-size: initial;padding: 0px;" onclick="camera51.setColor('colorFG');">
      <i class="material-icons left" style="color:#7cb342;padding-right: 0px;margin-right: 10px;font-size: 24px;">add_circle</i>
      Mark Object
    </a>
    <a id="camera51-btn-mark-background" class="waves-effect waves-light  btn-flat roboto"
       style="margin-left:10px;color:#f44336;font-size: initial;padding: 0px;" onclick="camera51.setColor('colorBG');">
      <i class="material-icons left" style="color:#f44336;padding-right: 0px;margin-right: 10px;font-size: 24px;">remove_circle</i>
      Mark Background
    </a>
    <a id="camera51-btn-undo" class="waves-effect waves-light btn-flat roboto" style="color: white;font-size: initial;"
       onclick="camera51.undo()">UNDO</a>
    <br>
    <a id="camera51-zoom-in" class="waves-effect waves-circle transparent"
       style="position: absolute;top: 148px;left: 30px" onmousedown="camera51.onclickLongZoomIn()"
       onmouseup="camera51.onmouseupLongZoomIn()">
      <i class="material-icons right small" style="color:#393b4b;">zoom_in</i>
    </a>
    <a id="camera51-zoom-out" class="waves-effect waves-circle transparent"
       style="position: absolute;top: 182px;left: 30px" onmousedown="camera51.onclickLongZoomOut()"
       onmouseup="camera51.onmouseupLongZoomOut()">
      <i class="material-icons right small" style="color:#393b4b;">zoom_out</i>
    </a>
  </div>
  <div class="progress" style="margin: 0px;visibility: hidden;height: 3px" id="camera51-loader">
    <div class="indeterminate"></div>
  </div>
  <div>
    <div id="ad54" style="height:500px;width:100%"></div>
  </div>
  <div class="modal-footer" style="background-color: white ">
    <a id="camera51-btn-save-image" class="waves-effect waves-light btn-large btn-flat roboto"
       onclick="camera51.saveImage()"
       style="margin-right: 20px; background-color: #393b4b !important;color: white !important;">Save Image</a>
    <a id="camera51-btn-show-result" class="waves-effect waves-light  btn-large btn-flat roboto"
       style="color:black !important;margin-right: 20px; background-color: #ffffff !important;"
       onclick="camera51.showResult()">Show Result</a>
  </div>
</div>

<script>

  var apiUrl = "http://ec2-54-152-227-158.compute-1.amazonaws.com/";
  //var apiUrl = "http://localhost:8080/";

  var customerId = 3;
  var customerToken = "a059e275-52e0-4524-8050-3872fdd8d9af";

  var camera51SQSFunctionality = new Camera51SQSFunctionality(
    customerId, customerToken, "ad54"
  );

  window.onload = function () {
    getCamera51SessionToken(); // get your session token. Used for request image.

  };

  /*
   *  Example call to clear images. Provide camera51 the element. And we will insert the response into this element.
   *  Element response will include and image or response message. Under it a button.
   *
   */
  function requestImage(imageId, origImgUrl) {
    var imgElement = document.getElementById("resultPreview-" + imageId);
    // We are using origImgUrl as trackId, as this is a unique identifier.
    camera51SQSFunctionality.requestAsync( origImgUrl, imgElement);
  };

  function openEditor(trackId, elementIdToResponse) {
    // we are creating a callback function that will be called once user clicks save.
    // The function recives the result url
    var todoOnSaveWithResult = function (resultUrl) {
      $("#theImg-" + elementIdToResponse).attr('src', resultUrl);
      $('#modal1').closeModal();

    };
    $('#modal1').openModal();
    // call editor
    camera51.setDataTrackId({
      'customerId': customerId,
      'trackId': trackId
    }, todoOnSaveWithResult);
  }

</script>
</body>
</html>

