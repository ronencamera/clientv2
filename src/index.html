<!DOCTYPE html>
<html lang="">
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <!-- end favicon -->

  <!-- base url -->
  <base href="<%= webpackConfig.metadata.baseUrl %>">

  <style>

  body, html {
  height: 100%;
  margin: 0px;
  background-color: white;

}

  </style>
</head>

<body >


<div style="text-align:center">
  <app-malabi lang="en" customerID="201" shadow="true" >
    Loading </app-malabi>
</div>





  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75726540-1', 'auto');


  </script>

  <script>

    var parentDocHeight = document.documentElement.clientHeight;
    var parentDocWidth = document.documentElement.clientWidth;

    var mainWindow ;
    var eventPost;
     window.addEventListener('message', function (e) {
       mainWindow = e.source;
       eventPost = e;
       if(e.data == '') return;
       var result = '';
       try {
         result = e.data;

         if(e.data.trackId != '' && e.data.trackId !== null && e.data.height !== undefined){
           window.camera51App.zone.run(function () { window.camera51Edit.setTrackId(e.data.customerId, e.data.trackId)});
           return;
         }
      //   console.log(result);
         if(result == "openEdit"){
          window.camera51App.zone.run(function () { window.camera51Edit.openEdit()});
          console.log('open edit');
          return;
         }
         if(result == 'setColor_colorBG'){
            window.camera51App.zone.run(function () { window.camera51Edit.setColor('colorBG')});
            return;
         }
         if(result == 'setColor_colorFG'){
            window.camera51App.zone.run(function () { window.camera51Edit.setColor('colorFG')})
            return;
         }
         if(result == 'saveImage'){
            window.camera51App.zone.run(function () { window.camera51Edit.saveImage()});
            return;
         }
         if(result == 'showResult'){
            window.camera51App.zone.run(function () { window.camera51Edit.showResult()});
            return;
         }
         if(result == 'zoomIn'){
            window.camera51App.zone.run(function () { window.camera51Edit.doZoom('in')});
            return;
         }
         if(result == 'zoomOut'){
            window.camera51App.zone.run(function () { window.camera51Edit.doZoom('out')});
            return;
         }

         if(result == 'onclickLongZoomIn'){
            window.camera51App.zone.run(function () { window.camera51Edit.doLongZoomPressDown('in')});
            return;
         }
         if(result == 'onmouseupLongZoomIn'){
            window.camera51App.zone.run(function () { window.camera51Edit.doLongZoomPressUp('in')});
            return;
         }
        if(result == 'onclickLongZoomOut'){
            window.camera51App.zone.run(function () { window.camera51Edit.doLongZoomPressDown('out')});
            return;
         }
         if(result == 'onmouseupLongZoomOut'){
            window.camera51App.zone.run(function () { window.camera51Edit.doLongZoomPressUp('out')});
            return;
         }

         if(result == 'undo'){
            window.camera51App.zone.run(function () { window.camera51Edit.undo()});
            return;
         }
       } catch (e) {
         result = 'eval() threw an exception.';
       }
       //result = "a";
       mainWindow.postMessage(result, event.origin);
     });


     function callbackEdit (mes){

        mainWindow.postMessage(mes, eventPost.origin);
        return true;
     }
   </script>
</body>
</html>
